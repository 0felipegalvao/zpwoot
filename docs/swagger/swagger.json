{
    "swagger": "2.0",
    "info": {
        "description": "A complete REST API for managing multiple WhatsApp sessions using Go, Fiber, PostgreSQL, and whatsmeow library.\n\n## Authentication\nAll API endpoints (except /health and /swagger/*) require API key authentication.\nProvide your API key in the `Authorization` header.",
        "title": "zpwoot - WhatsApp Multi-Session API",
        "contact": {
            "name": "zpwoot Support",
            "url": "https://github.com/your-org/zpwoot",
            "email": "support@zpwoot.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/",
    "paths": {
        "/api/v1/chatwoot/config": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Creates a new Chatwoot integration configuration. This enables synchronization between WhatsApp and Chatwoot. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Chatwoot"
                ],
                "summary": "Create Chatwoot configuration",
                "parameters": [
                    {
                        "description": "Chatwoot configuration request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/CreateChatwootConfigRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Chatwoot configuration created successfully",
                        "schema": {
                            "$ref": "#/definitions/ChatwootConfigResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body or parameters",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/sessions/create": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Creates a new WhatsApp session with the provided configuration. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Sessions"
                ],
                "summary": "Create a new WhatsApp session",
                "parameters": [
                    {
                        "description": "Session creation request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/SessionCreateRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Session created successfully",
                        "schema": {
                            "$ref": "#/definitions/SessionCreateResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body or parameters",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/sessions/list": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Retrieves a list of all WhatsApp sessions with optional filtering. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Sessions"
                ],
                "summary": "List all WhatsApp sessions",
                "parameters": [
                    {
                        "enum": [
                            "created",
                            "connecting",
                            "connected",
                            "disconnected",
                            "error",
                            "logged_out"
                        ],
                        "type": "string",
                        "example": "\"connected\"",
                        "description": "Filter by session status",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "example": "\"5511999999999@s.whatsapp.net\"",
                        "description": "Filter by device JID",
                        "name": "deviceJid",
                        "in": "query"
                    },
                    {
                        "maximum": 100,
                        "minimum": 1,
                        "type": "integer",
                        "default": 20,
                        "example": 20,
                        "description": "Limit number of results",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "minimum": 0,
                        "type": "integer",
                        "default": 0,
                        "example": 0,
                        "description": "Offset for pagination",
                        "name": "offset",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sessions retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/ListSessionsResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request parameters",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/sessions/{sessionId}/qr": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Retrieves the current QR code for pairing a WhatsApp session. The QR code expires after 60 seconds. You can use either the session UUID or session name. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Sessions"
                ],
                "summary": "Get QR code for session pairing",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"your-api-key-here\"",
                        "description": "API Key for authentication",
                        "name": "X-API-Key",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"mySession\"",
                        "description": "Session ID or Name",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "QR code retrieved successfully",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/zpwoot_internal_app.SuccessResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/zpwoot_internal_app.QRCodeResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Invalid session identifier",
                        "schema": {
                            "$ref": "#/definitions/zpwoot_internal_app.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "$ref": "#/definitions/zpwoot_internal_app.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Session not found or no QR code available",
                        "schema": {
                            "$ref": "#/definitions/zpwoot_internal_app.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "$ref": "#/definitions/zpwoot_internal_app.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/sessions/{sessionId}/webhook/config": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Retrieves the current webhook configuration for a specific session. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Webhooks"
                ],
                "summary": "Get webhook configuration",
                "parameters": [
                    {
                        "type": "string",
                        "format": "uuid",
                        "example": "\"123e4567-e89b-12d3-a456-426614174000\"",
                        "description": "Session ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Webhook configuration retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/WebhookResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "404": {
                        "description": "Session or webhook configuration not found",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Creates a new webhook configuration for a specific session. Webhooks will receive real-time events from WhatsApp. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Webhooks"
                ],
                "summary": "Create webhook configuration",
                "parameters": [
                    {
                        "type": "string",
                        "format": "uuid",
                        "example": "\"123e4567-e89b-12d3-a456-426614174000\"",
                        "description": "Session ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Webhook configuration request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/SetConfigRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Webhook created successfully",
                        "schema": {
                            "$ref": "#/definitions/WebhookResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request body or parameters",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/sessions/{sessionId}/connect": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Establishes connection with WhatsApp for the specified session. Will generate QR code if not paired. You can use either the session UUID or session name. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Sessions"
                ],
                "summary": "Connect WhatsApp session",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"mySession\"",
                        "description": "Session ID or Name",
                        "name": "sessionId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Connection initiated successfully",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Invalid session identifier",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/sessions/{sessionId}/delete": {
            "delete": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Permanently removes a WhatsApp session and all associated data. This action cannot be undone. You can use either the session UUID or session name. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Sessions"
                ],
                "summary": "Delete a WhatsApp session",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"mySession\"",
                        "description": "Session ID or Name",
                        "name": "sessionId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Session deleted successfully",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Invalid session identifier",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/sessions/{sessionId}/info": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Retrieves detailed information about a specific WhatsApp session including connection status and device info. You can use either the session UUID or session name. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Sessions"
                ],
                "summary": "Get session information",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"mySession\"",
                        "description": "Session ID or Name",
                        "name": "sessionId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Session info retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/SessionInfoResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid session identifier",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        },
        "/sessions/{sessionId}/logout": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Logs out from WhatsApp for the specified session. You can use either the session UUID or session name. Requires API key authentication.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Sessions"
                ],
                "summary": "Logout WhatsApp session",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"mySession\"",
                        "description": "Session ID or Name",
                        "name": "sessionId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Session logged out successfully",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Invalid session identifier",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API key",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "404": {
                        "description": "Session not found",
                        "schema": {
                            "type": "object"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "type": "object"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "ChatwootConfigResponse": {
            "type": "object",
            "properties": {
                "account_id": {
                    "type": "string",
                    "example": "1"
                },
                "active": {
                    "type": "boolean",
                    "example": true
                },
                "created_at": {
                    "type": "string",
                    "example": "2024-01-01T00:00:00Z"
                },
                "id": {
                    "type": "string",
                    "example": "chatwoot-config-123"
                },
                "inbox_id": {
                    "type": "string",
                    "example": "1"
                },
                "updated_at": {
                    "type": "string",
                    "example": "2024-01-01T00:00:00Z"
                },
                "url": {
                    "type": "string",
                    "example": "https://chatwoot.example.com"
                }
            }
        },
        "CreateChatwootConfigRequest": {
            "type": "object",
            "required": [
                "accountId",
                "apiKey",
                "url"
            ],
            "properties": {
                "accountId": {
                    "type": "string",
                    "example": "1"
                },
                "apiKey": {
                    "type": "string",
                    "example": "chatwoot-api-key-123"
                },
                "inboxId": {
                    "type": "string",
                    "example": "1"
                },
                "url": {
                    "type": "string",
                    "example": "https://chatwoot.example.com"
                }
            }
        },
        "SetConfigRequest": {
            "type": "object",
            "required": [
                "events",
                "url"
            ],
            "properties": {
                "events": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "message",
                        "status"
                    ]
                },
                "secret": {
                    "type": "string",
                    "example": "webhook-secret-key"
                },
                "sessionId": {
                    "type": "string",
                    "example": "session-123"
                },
                "url": {
                    "type": "string",
                    "example": "https://example.com/webhook"
                }
            }
        },
        "DeviceInfoResponse": {
            "type": "object",
            "properties": {
                "appVersion": {
                    "type": "string",
                    "example": "2.21.4.18"
                },
                "deviceModel": {
                    "type": "string",
                    "example": "Samsung Galaxy S21"
                },
                "osVersion": {
                    "type": "string",
                    "example": "11"
                },
                "platform": {
                    "type": "string",
                    "example": "android"
                }
            }
        },
        "ListSessionsResponse": {
            "type": "object",
            "properties": {
                "limit": {
                    "type": "integer",
                    "example": 20
                },
                "offset": {
                    "type": "integer",
                    "example": 0
                },
                "sessions": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/SessionInfoResponse"
                    }
                },
                "total": {
                    "type": "integer",
                    "example": 10
                }
            }
        },
        "SessionCreateRequest": {
            "type": "object",
            "required": [
                "name"
            ],
            "properties": {
                "name": {
                    "type": "string",
                    "maxLength": 50,
                    "minLength": 3,
                    "example": "mySession"
                },
                "proxyConfig": {
                    "$ref": "#/definitions/zpwoot_internal_domain_session.ProxyConfig"
                }
            }
        },
        "SessionCreateResponse": {
            "type": "object",
            "properties": {
                "createdAt": {
                    "type": "string",
                    "example": "2024-01-01T00:00:00Z"
                },
                "id": {
                    "type": "string",
                    "example": "session-123"
                },
                "isConnected": {
                    "type": "boolean",
                    "example": false
                },
                "name": {
                    "type": "string",
                    "example": "mySession"
                },
                "proxyConfig": {
                    "$ref": "#/definitions/zpwoot_internal_domain_session.ProxyConfig"
                }
            }
        },
        "SessionInfoResponse": {
            "type": "object",
            "properties": {
                "deviceInfo": {
                    "$ref": "#/definitions/DeviceInfoResponse"
                },
                "session": {
                    "$ref": "#/definitions/SessionResponse"
                }
            }
        },
        "SessionResponse": {
            "type": "object",
            "properties": {
                "connectedAt": {
                    "type": "string",
                    "example": "2024-01-01T00:00:30Z"
                },
                "connectionError": {
                    "type": "string",
                    "example": "Connection timeout"
                },
                "createdAt": {
                    "type": "string",
                    "example": "2024-01-01T00:00:00Z"
                },
                "deviceJid": {
                    "type": "string",
                    "example": "5511999999999@s.whatsapp.net"
                },
                "id": {
                    "type": "string",
                    "example": "session-123"
                },
                "isConnected": {
                    "type": "boolean",
                    "example": false
                },
                "name": {
                    "type": "string",
                    "example": "my-whatsapp-session"
                },
                "proxyConfig": {
                    "$ref": "#/definitions/zpwoot_internal_domain_session.ProxyConfig"
                },
                "updatedAt": {
                    "type": "string",
                    "example": "2024-01-01T00:00:00Z"
                }
            }
        },
        "WebhookResponse": {
            "type": "object",
            "properties": {
                "active": {
                    "type": "boolean",
                    "example": true
                },
                "createdAt": {
                    "type": "string",
                    "example": "2024-01-01T00:00:00Z"
                },
                "events": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "message",
                        "status"
                    ]
                },
                "id": {
                    "type": "string",
                    "example": "webhook-123"
                },
                "sessionId": {
                    "type": "string",
                    "example": "session-123"
                },
                "updatedAt": {
                    "type": "string",
                    "example": "2024-01-01T00:00:00Z"
                },
                "url": {
                    "type": "string",
                    "example": "https://example.com/webhook"
                }
            }
        },
        "zpwoot_internal_app.ErrorResponse": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "string",
                    "example": "VALIDATION_ERROR"
                },
                "details": {},
                "error": {
                    "type": "string",
                    "example": "Invalid request"
                },
                "success": {
                    "type": "boolean",
                    "example": false
                }
            }
        },
        "zpwoot_internal_app.QRCodeResponse": {
            "type": "object",
            "properties": {
                "expiresAt": {
                    "type": "string",
                    "example": "2024-01-01T00:01:00Z"
                },
                "qrCode": {
                    "type": "string",
                    "example": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
                },
                "timeoutSeconds": {
                    "type": "integer",
                    "example": 60
                }
            }
        },
        "zpwoot_internal_app.SuccessResponse": {
            "type": "object",
            "properties": {
                "data": {},
                "message": {
                    "type": "string",
                    "example": "Operation completed successfully"
                },
                "success": {
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "zpwoot_internal_domain_session.ProxyConfig": {
            "type": "object",
            "properties": {
                "host": {
                    "type": "string",
                    "example": "proxy.example.com"
                },
                "password": {
                    "type": "string",
                    "example": "password"
                },
                "port": {
                    "type": "integer",
                    "example": 8080
                },
                "type": {
                    "description": "http, socks5",
                    "type": "string",
                    "example": "http"
                },
                "username": {
                    "type": "string",
                    "example": "user"
                }
            }
        }
    },
    "securityDefinitions": {
        "ApiKeyAuth": {
            "description": "Enter your API key directly (no Bearer prefix required). Example: dev-api-key-12345",
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        }
    }
}